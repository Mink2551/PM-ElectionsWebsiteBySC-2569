rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    
    // ============================================
    // üó≥Ô∏è PM Student Board Election 2569
    // Firestore Security Rules
    // ============================================
    
    // ----------------
    // Candidates Collection
    // ----------------
    match /candidates/{candidateId} {
      // Anyone can read candidate data (public info)
      allow read: if true;
      
      // TEMPORARY: Allow create/delete until Firebase Auth is implemented
      allow create, delete: if true;
      
      // TEMPORARY: Allow update until Firebase Auth is implemented
      allow update: if true;
    }
    
    // ----------------
    // Settings Collection (Public read, Admin write)
    // ----------------
    match /settings/{settingId} {
      // Anyone can read settings (for live URL, schedule, etc.)
      allow read: if true;
      
      // TEMPORARY: Allow writes until Firebase Auth is implemented
      allow write: if true;
    }
    
    // ----------------
    // Users Collection (User verification data)
    // ----------------
    match /users/{userId} {
      // Anyone can read user data (for checking blocked status)
      allow read: if true;
      
      // Allow create for new user registration
      allow create: if true;
      
      // TEMPORARY: Allow update/delete until Firebase Auth is implemented
      allow update, delete: if true;
    }
    
    // ----------------
    // Logs Collection (Admin activity tracking)
    // ----------------
    match /logs/{logId} {
      // Allow read for viewing logs in admin
      allow read: if true;
      
      // Allow create for logging actions
      allow create: if true;
      
      // Logs should not be modified or deleted
      allow update, delete: if false;
    }
    
    // ----------------
    // Default: Deny All Other Access
    // ----------------
    match /{document=**} {
      allow read, write: if false;
    }
  }
}
